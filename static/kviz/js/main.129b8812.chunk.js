(this["webpackJsonpkviz-web"]=this["webpackJsonpkviz-web"]||[]).push([[0],{13:function(e,t,a){e.exports=a(25)},18:function(e,t,a){},19:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(11),r=a.n(o),l=(a(18),a(4)),s=a(2);a(19);var i=function(e){var t=e.username?e.username:"Anonimus",a=!!e.isLogedIn&&e.isLogedIn,n=a?"accounts/logout/":"accounts/login/?next=/",o=a?"Odjavi se":"Prijavi se";return!0===a?c.a.createElement("div",null,c.a.createElement("nav",{className:"navbar navbar-expand-lg  navbar-dark bg-primary"},c.a.createElement("div",{className:"navbar-brand"},t),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},c.a.createElement("ul",{className:"navbar-nav mr-auto"},c.a.createElement("li",{className:"nav-item active"},c.a.createElement("a",{className:"nav-link",href:n},o,c.a.createElement("span",{className:"sr-only"},"(current)"))),c.a.createElement("li",{className:"nav-item active"},c.a.createElement("button",{className:"nav-link btn btn-link",onClick:function(){return e.onClick()}},"Kreiraj pitanje",c.a.createElement("span",{className:"sr-only"},"(current)"))))))):c.a.createElement("div",null,c.a.createElement("nav",{className:"navbar navbar-expand-lg  navbar-dark bg-primary"},c.a.createElement("div",{className:"navbar-brand"},t),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},c.a.createElement("ul",{className:"navbar-nav mr-auto"},c.a.createElement("li",{className:"nav-item active"},c.a.createElement("a",{className:"nav-link",href:n},o,c.a.createElement("span",{className:"sr-only"},"(current)")))))))},u=a(6),m=a(12),d=a(9);function v(e){for(var t=Object(n.useState)(""),a=Object(s.a)(t,2),o=a[0],r=a[1],i=Object(n.useState)(["",""]),u=Object(s.a)(i,2),m=u[0],d=u[1],v=Object(n.useState)(2),b=Object(s.a)(v,2),p=b[0],E=b[1],g=[],f=function(e){g.push(c.a.createElement("div",{key:e},c.a.createElement("label",null,c.a.createElement("p",null,"Odgovor ",e+1,":"),c.a.createElement("input",{type:"text",value:m[e],onChange:function(t){!function(e,t){var a=Object(l.a)(m);a[t]=e.value,d(a)}(t.target,e)}}))))},j=0;j<p;j++)f(j);return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onClick(o,m)}},c.a.createElement("label",null,c.a.createElement("div",null,c.a.createElement("p",{className:"h1"},"Pitanje:")),c.a.createElement("input",{type:"text",value:o,onChange:function(e){r(e.target.value)}})),c.a.createElement("div",null,c.a.createElement("p",{className:"h1"},"Odgovori:")),g,c.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Posalji pitanje"})),c.a.createElement("button",{className:"btn btn-secondary",onClick:function(){E(p+1);var e=Object(l.a)(m);e.push(""),d(e)}},"Dodaj polje za odgovor"))}function b(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),o=a[0],r=a[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){var t;t=e.answers,f("POST","/submit/",(function(e,t){r(!0),m(e.result)}),t)}),[e.answers]),!0===o?c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-sx"},c.a.createElement("div",{className:"card"},c.a.createElement("img",{className:"card-img-top",src:"".concat("","static/kviz/").concat(u,".jpeg"),alt:"Responsive"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},u),c.a.createElement("p",{className:"card-text"},"Ovo je jedan od mnogih verzija Dragana."),c.a.createElement("a",{href:"/",onClick:function(){return e.onClick()},className:"btn btn-primary"},"Pocni opet"))))):c.a.createElement("div",null,"Loading")}function p(e){var t=e.question?e.question.question_text:"",a=e.question?e.question.choice_set:[],n=e.question?e.question.creator:"",o=e.question?e.question.votes:0,r=!!e.question&&e.isLogedIn,l=!1;return e.question&&!0===e.question.user_did_vote&&(l=!0),c.a.createElement("div",null,c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-sm"},c.a.createElement("div",{className:"border"},c.a.createElement("div",{className:"border my-3"},c.a.createElement("p",{className:"h1 text-center"},t)),c.a.createElement("div",{className:"border mt-3"},c.a.createElement(g,{answers:a,onClick:e.onClick}))))),c.a.createElement("div",{className:"row justify-content-between"},c.a.createElement("div",{className:"col-auto"},c.a.createElement("p",null," Pitanje postavio: ",n)),c.a.createElement("div",{className:"col-md-2 col-3"},c.a.createElement(E,{votes:o,isLogedIn:r,didVote:l,question:t}))))}function E(e){var t=Object(n.useState)(e.didVote),a=Object(s.a)(t,2),o=a[0],r=a[1],l=Object(n.useState)(e.votes),i=Object(s.a)(l,2),v=i[0],b=i[1];Object(n.useEffect)((function(){!0===e.isLogedIn?window.$('[data-toggle="popover"]').popover("disable"):window.$('[data-toggle="popover"]').popover()})),Object(n.useEffect)((function(){r(e.didVote),b(e.votes)}),[e.didVote,e.votes,e.question]);var p=function(){e.isLogedIn&&function(e,t){f("POST","/toggle-vote/",t,e)}({question:e.question},(function(e,t){o?(r(!1),b(v-1)):(r(!0),b(v+1))}))};return e.isLogedIn&&o?c.a.createElement("button",{id:"popover",onClick:function(){p()},className:"btn btn-dark btn-block","data-container":"body","data-toggle":"popover","data-placement":"left","data-content":"Vivamus sagittis lacus vel augue laoreet rutrum faucibus."},c.a.createElement(u.a,{icon:d.a})," ",c.a.createElement("span",{className:"badge badge-primary"},v)):c.a.createElement("button",{id:"popover",onClick:function(){p()},className:"btn btn-dark btn-block","data-container":"body","data-toggle":"popover","data-placement":"left","data-content":"Vivamus sagittis lacus vel augue laoreet rutrum faucibus."},c.a.createElement(u.a,{icon:m.a})," ",c.a.createElement("span",{className:"badge badge-primary"},v))}function g(e){return e.answers.map((function(t,a){return c.a.createElement("div",{className:"mx-auto m-6 border",key:a},c.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-lg btn-block",onClick:function(){return e.onClick(t.choice_text)}},t.choice_text,"(",t.votes,c.a.createElement(u.a,{icon:d.a}),")"))}))}function f(e,t,a,n){var c;n&&(c=JSON.stringify(n));var o=new XMLHttpRequest,r="".concat("","api").concat(t);o.responseType="json",o.open(e,r);var l=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var c=a[n].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken");o.setRequestHeader("Content-Type","application/json"),l&&(o.setRequestHeader("HTTP_X_REQUEST_WITH","XMLHttpRequest"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-CSRFToken",l)),o.onload=function(){a(o.response,o.status)},o.onerror=function(e){console.log(e),a({message:"Ne radi"},400)},o.send(c)}var j=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),u=Object(s.a)(r,2),m=u[0],d=u[1],E=Object(n.useState)(!1),g=Object(s.a)(E,2),j=g[0],N=g[1],O=Object(n.useState)(0),k=Object(s.a)(O,2),h=k[0],y=k[1],q=Object(n.useState)([]),S=Object(s.a)(q,2),C=S[0],w=S[1],x=Object(n.useState)(!1),_=Object(s.a)(x,2),L=_[0],I=_[1],T=Object(n.useState)("Anonimus"),R=Object(s.a)(T,2),P=R[0],H=R[1],V=Object(n.useState)(!1),X=Object(s.a)(V,2),z=X[0],M=X[1];Object(n.useEffect)((function(){!1===j&&f("GET","/questions/",(function(e,t){o(Object(l.a)(e)),N(!0);var a=e[0];a.hasOwnProperty("curr_user")?(I(!0),H(a.curr_user)):(I(!1),H("Anonimus"))}))}),[j]);var W=function(){M(!0)};return!0===j?!0===m?c.a.createElement("div",{className:"mx-auto"},c.a.createElement(b,{answers:C,onClick:function(){!0===j&&(N(!1),y(0))}})):z?c.a.createElement("div",null,c.a.createElement(i,{onClick:W,username:P,isLogedIn:L}),c.a.createElement(v,{onClick:function(e,t){var a=!0;""===e&&(a=!1);var n={question_text:e,choice_set:[]};t.forEach((function(e){""!==e&&n.choice_set.push({choice_text:e})})),n.choice_set===[]&&(a=!1),console.log(n),console.log(a),a&&f("POST","/create/",(function(e,t){201===t&&M(!1)}),n)}})):c.a.createElement("div",null,c.a.createElement(i,{onClick:W,username:P,isLogedIn:L}),c.a.createElement(p,{question:a[h],onClick:function(e){var t=Object(l.a)(C),n={answer:e,question:a[h].question_text};t.push(n),w(t),y(h+1),h===a.length-1&&d(!0)},isLogedIn:L})):c.a.createElement("div",null,c.a.createElement(i,null),"Loading")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.129b8812.chunk.js.map